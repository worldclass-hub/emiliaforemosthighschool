<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EMFORHS Finance Portal | Dashboard</title>

    <!-- Favicon - Emilia Logo -->
    <link rel="icon" type="image/x-icon" href="https://ncctazjcffmpuniwctkz.supabase.co/storage/v1/object/public/user-uploads/EMILIA%20LOGO.png">

    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
    
    <style>
        /* ========== NO OVERSCOLL/BOUNCE SYSTEM - FIXED ========== */
        * {
            font-family: 'Inter', sans-serif;
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }
        
        /* FIXED: Remove position: fixed from html/body */
        html {
            width: 100%;
            height: 100%;
            overflow: hidden;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
        }
        
        body {
            width: 100%;
            height: 100%;
            overflow: hidden;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            margin: 0;
            padding: 0;
            touch-action: pan-y;
            position: relative;
        }
        
        /* Main scrollable container - FIXED */
        .scroll-container {
            width: 100%;
            height: 100vh;
            height: 100dvh;
            overflow-y: auto;
            overflow-x: hidden;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            -webkit-overflow-scrolling: touch;
            overscroll-behavior: contain;
            position: relative;
            scrollbar-width: none; /* Firefox */
        }
        
        /* Hide scrollbar for Chrome, Safari and Opera */
        .scroll-container::-webkit-scrollbar {
            display: none;
        }
        
        /* Main content wrapper */
        .content-wrapper {
            width: 100%;
            min-height: 100%;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            padding: 20px;
        }
        
        /* Prevent any element from causing overflow */
        .no-overscroll {
            max-width: 100%;
            overflow: hidden;
        }
        
        /* Mobile adjustments */
        @media (max-width: 768px) {
            .content-wrapper {
                padding: 12px;
                background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            }
            
            .scroll-container {
                -webkit-overflow-scrolling: touch;
                overscroll-behavior: contain;
            }
        }
        
        /* Original Styles */
        .card-hover-effect {
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        
        .card-hover-effect:hover {
            transform: translateY(-10px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        }
        
        .glow-effect {
            box-shadow: 0 0 20px rgba(59, 130, 246, 0.3);
        }
        
        .pulse-animation {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(59, 130, 246, 0.4); }
            70% { box-shadow: 0 0 0 15px rgba(59, 130, 246, 0); }
            100% { box-shadow: 0 0 0 0 rgba(59, 130, 246, 0); }
        }
        
        .fade-in {
            animation: fadeIn 1s ease-out;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .school-header {
            background: linear-gradient(135deg, #1e40af 0%, #1e3a8a 100%);
            color: white;
            border-radius: 16px;
            padding: 16px;
            margin-bottom: 24px;
            box-shadow: 0 8px 20px rgba(30, 64, 175, 0.2);
            width: 100%;
            overflow: hidden;
        }
        
        .logo-container {
            width: 60px;
            height: 60px;
            background: white;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.15);
            flex-shrink: 0;
        }
        
        .logo-container img {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
        }
        
        /* Mobile-specific styles - COMPACT DESIGN */
        @media (max-width: 768px) {
            .school-header {
                border-radius: 12px;
                margin: 0 0 16px 0;
                padding: 12px;
            }
            
            .logo-container {
                width: 50px;
                height: 50px;
                border-radius: 10px;
                margin-right: 12px;
            }
            
            .content-wrapper {
                padding-bottom: 80px; /* Space for home button */
            }
            
            /* Compact main cards */
            .main-card {
                padding: 20px !important;
            }
            
            .main-card .text-3xl {
                font-size: 1.5rem !important;
                line-height: 1.3 !important;
            }
            
            .main-card .text-lg {
                font-size: 0.95rem !important;
                line-height: 1.4 !important;
                margin-bottom: 16px !important;
            }
            
            .main-card .space-y-4 {
                margin-bottom: 20px !important;
            }
            
            .main-card .space-y-4 .text-white {
                font-size: 0.9rem !important;
            }
            
            /* Fix button overflow */
            .main-card button {
                padding: 14px !important;
                font-size: 1rem !important;
                display: flex !important;
                align-items: center !important;
                justify-content: space-between !important;
                width: 100% !important;
            }
            
            .main-card button span {
                flex: 1;
                text-align: center;
                white-space: nowrap;
                overflow: hidden;
                text-overflow: ellipsis;
                margin-right: 8px;
            }
            
            .main-card button i {
                flex-shrink: 0;
                font-size: 1rem !important;
                margin-left: 0 !important;
            }
        }
        
        /* Extra small devices */
        @media (max-width: 480px) {
            .content-wrapper {
                padding: 10px;
            }
            
            .school-header h1 {
                font-size: 1.25rem !important;
            }
            
            .school-header p {
                font-size: 0.875rem !important;
            }
            
            .main-card {
                padding: 16px !important;
            }
            
            .main-card button {
                padding: 12px !important;
                font-size: 0.95rem !important;
            }
            
            .main-card button span {
                font-size: 0.9rem !important;
            }
        }
        
        /* Special class to prevent overscroll on children */
        .prevent-overscroll {
            touch-action: pan-y;
            -webkit-user-drag: none;
            user-select: none;
        }
        
        /* iOS specific fixes */
        @supports (-webkit-touch-callout: none) {
            .scroll-container {
                position: fixed;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                overflow-y: auto;
                -webkit-overflow-scrolling: touch;
                height: 100vh;
            }
        }
        
        /* ========== SUPER POWERFUL FLOATING HOME BUTTON ========== */
        .super-home-button {
            position: fixed;
            z-index: 99999;
            bottom: 20px;
            right: 20px;
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 
                0 8px 25px rgba(102, 126, 234, 0.4),
                0 0 0 3px rgba(255, 255, 255, 0.2),
                0 0 0 6px rgba(118, 75, 162, 0.1),
                inset 0 0 15px rgba(255, 255, 255, 0.3);
            transition: all 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            animation: float 3s ease-in-out infinite, glow 2s ease-in-out infinite alternate;
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 2px solid rgba(255, 255, 255, 0.3);
            overflow: hidden;
        }
        
        .super-home-button:hover {
            transform: scale(1.15) translateY(-5px);
            box-shadow: 
                0 12px 35px rgba(102, 126, 234, 0.6),
                0 0 0 4px rgba(255, 255, 255, 0.3),
                0 0 0 8px rgba(118, 75, 162, 0.15),
                inset 0 0 20px rgba(255, 255, 255, 0.4);
            animation-play-state: paused;
        }
        
        .super-home-button:active {
            transform: scale(0.95) translateY(0);
            transition: all 0.1s ease;
        }
        
        .super-home-button i {
            color: white;
            font-size: 24px;
            filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.3));
            transition: all 0.3s ease;
        }
        
        .super-home-button:hover i {
            transform: rotate(360deg);
            font-size: 26px;
        }
        
        /* Floating animation */
        @keyframes float {
            0%, 100% {
                transform: translateY(0px) rotate(0deg);
            }
            50% {
                transform: translateY(-10px) rotate(3deg);
            }
        }
        
        /* Glow animation */
        @keyframes glow {
            0% {
                box-shadow: 
                    0 8px 25px rgba(102, 126, 234, 0.4),
                    0 0 0 3px rgba(255, 255, 255, 0.2),
                    0 0 0 6px rgba(118, 75, 162, 0.1);
            }
            100% {
                box-shadow: 
                    0 8px 30px rgba(102, 126, 234, 0.6),
                    0 0 0 3px rgba(255, 255, 255, 0.3),
                    0 0 0 6px rgba(118, 75, 162, 0.2);
            }
        }
        
        /* Particle effects */
        .home-button-particle {
            position: absolute;
            width: 3px;
            height: 3px;
            background: rgba(255, 255, 255, 0.8);
            border-radius: 50%;
            pointer-events: none;
            opacity: 0;
        }
        
        /* Mobile responsive */
        @media (max-width: 768px) {
            .super-home-button {
                width: 55px;
                height: 55px;
                bottom: 15px;
                right: 15px;
            }
            
            .super-home-button i {
                font-size: 22px;
            }
            
            .super-home-button:hover i {
                font-size: 24px;
            }
        }
        
        /* Tooltip */
        .home-button-tooltip {
            position: absolute;
            right: 70px;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 6px 12px;
            border-radius: 8px;
            font-size: 12px;
            font-weight: 600;
            white-space: nowrap;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
            pointer-events: none;
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
        }
        
        .home-button-tooltip:after {
            content: '';
            position: absolute;
            top: 50%;
            right: -5px;
            transform: translateY(-50%);
            border-left: 5px solid rgba(0, 0, 0, 0.8);
            border-top: 5px solid transparent;
            border-bottom: 5px solid transparent;
        }
        
        .super-home-button:hover .home-button-tooltip {
            opacity: 1;
            visibility: visible;
            right: 65px;
        }
        
        /* Special effects on click */
        @keyframes ripple {
            0% {
                width: 0;
                height: 0;
                opacity: 1;
            }
            100% {
                width: 150px;
                height: 150px;
                opacity: 0;
            }
        }
        
        .ripple-effect {
            position: absolute;
            border-radius: 50%;
            background: radial-gradient(circle, rgba(255,255,255,0.8) 0%, rgba(255,255,255,0) 70%);
            transform: translate(-50%, -50%);
            animation: ripple 0.8s linear;
            pointer-events: none;
        }
        
        /* Prevent text selection */
        .no-select {
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }
        
        /* Compact button styles for mobile */
        .compact-button {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 100%;
            padding: 14px 12px;
            font-size: 1rem;
            font-weight: bold;
            border-radius: 12px;
            transition: all 0.3s ease;
        }
        
        .compact-button span {
            flex: 1;
            text-align: center;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            margin-right: 8px;
        }
        
        .compact-button i {
            flex-shrink: 0;
            font-size: 1rem;
            transition: transform 0.3s ease;
        }
        
        .compact-button:hover i {
            transform: translateX(3px);
        }
        
        /* Responsive grid spacing */
        @media (max-width: 768px) {
            .grid.gap-10 {
                gap: 20px !important;
            }
            
            .max-w-6xl.mx-auto {
                max-width: 100% !important;
            }
        }
    </style>
</head>
<body class="no-select">
    <!-- Super Powerful Floating Home Button -->
    <div class="super-home-button" id="superHomeButton" title="Go to Dashboard Home">
        <i class="fas fa-home"></i>
        <div class="home-button-tooltip">Dashboard Home</div>
    </div>

    <!-- Scroll Container - Only this can scroll -->
    <div class="scroll-container" id="scrollContainer">
        <!-- Content Wrapper -->
        <div class="content-wrapper">
            <!-- School Header with Logo -->
            <div class="school-header fade-in no-overscroll">
                <div class="flex flex-col md:flex-row items-center justify-between">
                    <div class="text-center md:text-left mb-4 md:mb-0">
                        <div class="flex flex-col md:flex-row items-center justify-center md:justify-start mb-2">
                            <!-- School Logo -->
                            <div class="logo-container mr-0 md:mr-4 mb-3 md:mb-0">
                                <img src="https://ncctazjcffmpuniwctkz.supabase.co/storage/v1/object/public/user-uploads/EMILIA%20LOGO.png" 
                                     alt="EMILIA FOREMOST HIGH SCHOOL Logo"
                                     onerror="this.onerror=null; this.src='https://via.placeholder.com/80x80/1e40af/ffffff?text=EMFORHS';">
                            </div>
                            <div class="text-center md:text-left">
                                <h1 class="text-xl md:text-3xl font-bold">EMILIA FOREMOST HIGH SCHOOL</h1>
                                <p class="text-blue-100 text-sm md:text-base">Excellence in Education Since 2007</p>
                                <div class="mt-1 inline-block bg-white/20 px-2 py-1 rounded-full text-xs">
                                    School ID: SCH-EMF-2023
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="text-center mt-4 md:mt-0">
                        <div class="bg-white text-blue-800 font-bold text-lg md:text-xl py-2 px-4 rounded-full shadow-lg">
                            EMFORHS
                        </div>
                        <p class="text-blue-100 mt-1 text-xs md:text-sm">Finance Management System</p>
                    </div>
                </div>
            </div>
            
            <!-- Header -->
            <header class="mb-8 md:mb-12 text-center fade-in no-overscroll px-2">
                <h1 class="text-2xl md:text-4xl font-bold text-gray-800 mb-3">
                    <i class="fas fa-chart-line text-blue-600 mr-2"></i>
                    EMFORHS Finance Portal
                </h1>
                <p class="text-gray-600 text-base md:text-lg max-w-3xl mx-auto">
                    Intelligent dashboard for managing school finances at Emilia Foremost High School.
                </p>
                
                <div class="mt-6 inline-flex items-center bg-gradient-to-r from-blue-50 to-indigo-50 rounded-full px-4 py-2 shadow-md no-overscroll">
                    <div class="w-2 h-2 bg-green-500 rounded-full mr-2 pulse-animation"></div>
                    <span class="text-gray-700 font-medium text-sm">System Status: <span class="text-green-600">All Services Operational</span></span>
                </div>
                
                <div class="mt-4 text-gray-500 text-sm">
                    <i class="fas fa-calendar-alt mr-1"></i>
                    <span id="academicYearTerm">Academic Year: 2023-2024 | Current Term: 3rd Term</span>
                </div>
            </header>
            
            <!-- Dashboard Stats -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-8 fade-in px-2">
                <div class="bg-white rounded-xl p-4 shadow-lg no-overscroll">
                    <div class="flex items-center">
                        <div class="bg-blue-100 p-2 rounded-lg mr-3">
                            <i class="fas fa-users text-blue-600 text-lg"></i>
                        </div>
                        <div>
                            <p class="text-gray-500 text-xs">Active Students</p>
                            <p class="text-xl font-bold text-gray-800">2,847</p>
                            <p class="text-green-600 text-xs mt-1">
                                <i class="fas fa-arrow-up mr-1"></i> 5.2% from last term
                            </p>
                        </div>
                    </div>
                </div>
                
                <div class="bg-white rounded-xl p-4 shadow-lg no-overscroll">
                    <div class="flex items-center">
                        <div class="bg-green-100 p-2 rounded-lg mr-3">
                            <i class="fas fa-dollar-sign text-green-600 text-lg"></i>
                        </div>
                        <div>
                            <p class="text-gray-500 text-xs">Annual Revenue</p>
                            <p class="text-xl font-bold text-gray-800">$4.2M</p>
                            <p class="text-green-600 text-xs mt-1">
                                <i class="fas fa-arrow-up mr-1"></i> 12.7% from last year
                            </p>
                        </div>
                    </div>
                </div>
                
                <div class="bg-white rounded-xl p-4 shadow-lg no-overscroll">
                    <div class="flex items-center">
                        <div class="bg-purple-100 p-2 rounded-lg mr-3">
                            <i class="fas fa-percentage text-purple-600 text-lg"></i>
                        </div>
                        <div>
                            <p class="text-gray-500 text-xs">Payment Completion</p>
                            <p class="text-xl font-bold text-gray-800">94.7%</p>
                            <p class="text-green-600 text-xs mt-1">
                                <i class="fas fa-arrow-up mr-1"></i> 3.1% from last term
                            </p>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Main Navigation Cards -->
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 max-w-6xl mx-auto px-2">
                <!-- Card 1: SCHOOL TUITION AND BILL SUMMARY -->
                <div class="card-hover-effect main-card bg-gradient-to-br from-blue-500 to-indigo-700 rounded-xl p-6 shadow-xl overflow-hidden relative glow-effect no-overscroll">
                    <div class="absolute top-0 right-0 w-32 h-32 bg-white opacity-10 rounded-full -mr-16 -mt-16"></div>
                    <div class="absolute bottom-0 left-0 w-48 h-48 bg-white opacity-5 rounded-full -ml-32 -mb-32"></div>
                    
                    <div class="relative z-10">
                        <div class="flex items-center mb-4">
                            <div class="bg-white p-3 rounded-lg mr-4">
                                <i class="fas fa-file-invoice-dollar text-2xl text-blue-600"></i>
                            </div>
                            <div>
                                <h2 class="text-2xl font-bold text-white">Tuition & Bill Summary</h2>
                                <p class="text-blue-100 text-sm">EMFORHS Detailed Financial Overview</p>
                            </div>
                        </div>
                        
                        <p class="text-blue-100 mb-6 text-base">
                            Access comprehensive breakdown of tuition fees, payment schedules, pending bills, and payment history.
                        </p>
                        
                        <div class="space-y-3 mb-6">
                            <div class="flex items-center">
                                <i class="fas fa-check-circle text-green-300 mr-2 text-sm"></i>
                                <span class="text-white text-sm">Real-time payment tracking</span>
                            </div>
                            <div class="flex items-center">
                                <i class="fas fa-check-circle text-green-300 mr-2 text-sm"></i>
                                <span class="text-white text-sm">Downloadable invoices with logo</span>
                            </div>
                            <div class="flex items-center">
                                <i class="fas fa-check-circle text-green-300 mr-2 text-sm"></i>
                                <span class="text-white text-sm">Payment deadline alerts</span>
                            </div>
                        </div>
                        
                        <button id="tuitionBtn" class="compact-button bg-white text-blue-700 hover:bg-blue-50">
                            <span>Access EMFORHS Dashboard</span>
                            <i class="fas fa-arrow-right"></i>
                        </button>
                    </div>
                </div>
                
                <!-- Card 2: TERM-END ACCOUNT STATEMENT -->
                <div class="card-hover-effect main-card bg-gradient-to-br from-purple-600 to-pink-600 rounded-xl p-6 shadow-xl overflow-hidden relative no-overscroll">
                    <div class="absolute top-0 right-0 w-32 h-32 bg-white opacity-10 rounded-full -mr-16 -mt-16"></div>
                    <div class="absolute bottom-0 left-0 w-48 h-48 bg-white opacity-5 rounded-full -ml-32 -mb-32"></div>
                    
                    <div class="relative z-10">
                        <div class="flex items-center mb-4">
                            <div class="bg-white p-3 rounded-lg mr-4">
                                <i class="fas fa-chart-bar text-2xl text-purple-600"></i>
                            </div>
                            <div>
                                <h2 class="text-2xl font-bold text-white">Term-End Statement</h2>
                                <p class="text-purple-100 text-sm">EMFORHS Comprehensive Financial Report</p>
                            </div>
                        </div>
                        
                        <p class="text-purple-100 mb-6 text-base">
                            View complete account statements including all transactions, adjustments, and balance summaries.
                        </p>
                        
                        <div class="space-y-3 mb-6">
                            <div class="flex items-center">
                                <i class="fas fa-check-circle text-pink-300 mr-2 text-sm"></i>
                                <span class="text-white text-sm">Visual financial analytics</span>
                            </div>
                            <div class="flex items-center">
                                <i class="fas fa-check-circle text-pink-300 mr-2 text-sm"></i>
                                <span class="text-white text-sm">Export to PDF/Excel with branding</span>
                            </div>
                            <div class="flex items-center">
                                <i class="fas fa-check-circle text-pink-300 mr-2 text-sm"></i>
                                <span class="text-white text-sm">Year-over-year comparisons</span>
                            </div>
                        </div>
                        
                        <button id="statementBtn" class="compact-button bg-white text-purple-700 hover:bg-purple-50">
                            <span>View EMFORHS Statements</span>
                            <i class="fas fa-arrow-right"></i>
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- Quick Access Section -->
            <div class="mt-12 bg-white rounded-xl p-6 shadow-lg max-w-6xl mx-auto fade-in no-overscroll px-2">
                <h3 class="text-xl font-bold text-gray-800 mb-4 text-center">
                    <i class="fas fa-bolt text-yellow-500 mr-2"></i>
                    EMFORHS Quick Access
                </h3>
                
                <div class="grid grid-cols-2 md:grid-cols-4 gap-3">
                    <a href="#" class="bg-blue-50 hover:bg-blue-100 rounded-lg p-3 text-center transition duration-300 no-overscroll">
                        <div class="bg-blue-100 w-10 h-10 rounded-full flex items-center justify-center mx-auto mb-2">
                            <i class="fas fa-calendar-day text-blue-600"></i>
                        </div>
                        <h4 class="font-bold text-gray-800 text-sm">Payment Calendar</h4>
                    </a>
                    
                    <a href="#" class="bg-green-50 hover:bg-green-100 rounded-lg p-3 text-center transition duration-300 no-overscroll">
                        <div class="bg-green-100 w-10 h-10 rounded-full flex items-center justify-center mx-auto mb-2">
                            <i class="fas fa-history text-green-600"></i>
                        </div>
                        <h4 class="font-bold text-gray-800 text-sm">Payment History</h4>
                    </a>
                    
                    <a href="#" class="bg-purple-50 hover:bg-purple-100 rounded-lg p-3 text-center transition duration-300 no-overscroll">
                        <div class="bg-purple-100 w-10 h-10 rounded-full flex items-center justify-center mx-auto mb-2">
                            <i class="fas fa-file-download text-purple-600"></i>
                        </div>
                        <h4 class="font-bold text-gray-800 text-sm">Download Forms</h4>
                    </a>
                    
                    <a href="#" class="bg-red-50 hover:bg-red-100 rounded-lg p-3 text-center transition duration-300 no-overscroll">
                        <div class="bg-red-100 w-10 h-10 rounded-full flex items-center justify-center mx-auto mb-2">
                            <i class="fas fa-headset text-red-600"></i>
                        </div>
                        <h4 class="font-bold text-gray-800 text-sm">EMFORHS Support</h4>
                    </a>
                </div>
            </div>
            
            <!-- Additional Information Section -->
            <div class="mt-12 bg-white rounded-xl p-6 shadow-lg max-w-4xl mx-auto fade-in no-overscroll px-2">
                <h3 class="text-xl font-bold text-gray-800 mb-4 text-center">
                    <i class="fas fa-info-circle text-blue-600 mr-2"></i>
                    How to Use This Portal
                </h3>
                
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                    <div class="text-center p-3 no-overscroll">
                        <div class="bg-blue-100 w-12 h-12 rounded-full flex items-center justify-center mx-auto mb-3">
                            <i class="fas fa-mouse-pointer text-blue-600"></i>
                        </div>
                        <h4 class="font-bold text-gray-800 mb-2 text-sm">1. Select a Dashboard</h4>
                        <p class="text-gray-600 text-xs">Click on either of the two main cards above.</p>
                    </div>
                    
                    <div class="text-center p-3 no-overscroll">
                        <div class="bg-green-100 w-12 h-12 rounded-full flex items-center justify-center mx-auto mb-3">
                            <i class="fas fa-search text-green-600"></i>
                        </div>
                        <h4 class="font-bold text-gray-800 mb-2 text-sm">2. Explore Information</h4>
                        <p class="text-gray-600 text-xs">Navigate through detailed reports and visualizations.</p>
                    </div>
                    
                    <div class="text-center p-3 no-overscroll">
                        <div class="bg-purple-100 w-12 h-12 rounded-full flex items-center justify-center mx-auto mb-3">
                            <i class="fas fa-download text-purple-600"></i>
                        </div>
                        <h4 class="font-bold text-gray-800 mb-2 text-sm">3. Export & Share</h4>
                        <p class="text-gray-600 text-xs">Download reports as PDF or Excel files.</p>
                    </div>
                </div>
                
                <div class="mt-6 pt-6 border-t border-gray-200 text-center">
                    <p class="text-gray-600 text-sm">
                        <i class="fas fa-shield-alt text-green-500 mr-2"></i>
                        All EMFORHS financial data is encrypted with bank-level security.
                    </p>
                    <p class="text-gray-600 text-sm mt-2">
                        <i class="fas fa-phone-alt text-blue-500 mr-2"></i>
                        Need help? Contact EMFORHS Finance Office: +234 8022854677-EMFS
                    </p>
                </div>
            </div>
            
            <!-- Footer -->
            <footer class="mt-12 mb-8 text-center text-gray-500 text-xs fade-in no-overscroll px-2">
                <div class="bg-white rounded-xl p-4 shadow-lg max-w-4xl mx-auto no-overscroll">
                    <div class="flex flex-col md:flex-row items-center justify-between">
                        <div class="mb-3 md:mb-0 flex items-center">
                            <div class="logo-container mr-3" style="width: 40px; height: 40px;">
                                <img src="https://ncctazjcffmpuniwctkz.supabase.co/storage/v1/object/public/user-uploads/EMILIA%20LOGO.png" 
                                     alt="EMFORHS Logo"
                                     onerror="this.onerror=null; this.src='https://via.placeholder.com/40x40/1e40af/ffffff?text=E';">
                            </div>
                            <div>
                                <h4 class="font-bold text-gray-800 text-base">EMILIA FOREMOST HIGH SCHOOL</h4>
                                <p class="text-gray-600 text-xs">Excellence in Education Since 2007</p>
                            </div>
                        </div>
                        <div class="text-center">
                            <p id="footerCopyright">© 2023 EMFORHS Finance Portal. All rights reserved.</p>
                            <p class="mt-1 text-xs">Powered by EMFORHS Financial Systems v4.2</p>
                        </div>
                    </div>
                    <div class="mt-4 pt-4 border-t border-gray-200">
                        <p class="text-gray-600 text-xs">
                            <i class="fas fa-map-marker-alt mr-2"></i>
                            123 Education Boulevard, Academic City, AC 12345
                        </p>
                    </div>
                </div>
            </footer>
        </div>
    </div>

    <!-- Success Modal -->
    <div id="successModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="bg-white rounded-xl p-6 max-w-md mx-4 transform transition-all duration-500 scale-95 opacity-0">
            <div class="text-center">
                <div class="w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4">
                    <i class="fas fa-check text-green-600 text-2xl"></i>
                </div>
                <h3 class="text-xl font-bold text-gray-800 mb-3" id="modalTitle">Success!</h3>
                <p class="text-gray-600 mb-4 text-sm" id="modalMessage">You are being redirected to the dashboard.</p>
                <div class="flex space-x-3">
                    <button id="cancelModal" class="flex-1 py-2.5 bg-gray-200 text-gray-800 font-bold rounded-lg hover:bg-gray-300 transition duration-300 text-sm">
                        Cancel
                    </button>
                    <button id="proceedRedirect" class="flex-1 py-2.5 bg-blue-600 text-white font-bold rounded-lg hover:bg-blue-700 transition duration-300 text-sm">
                        Continue
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ========== SUPER POWERFUL HOME BUTTON FUNCTIONS ==========
        const superHomeButton = document.getElementById('superHomeButton');
        const HOME_PAGE_URL = "{% url 'dashboard_exam_page' %}";  // Django URL for dashboard_exam_page
        
        // Create ripple effect
        function createRipple(event) {
            const button = event.currentTarget;
            const circle = document.createElement("span");
            const diameter = Math.max(button.clientWidth, button.clientHeight);
            const radius = diameter / 2;
            
            circle.style.width = circle.style.height = `${diameter}px`;
            circle.style.left = `${event.clientX - button.getBoundingClientRect().left - radius}px`;
            circle.style.top = `${event.clientY - button.getBoundingClientRect().top - radius}px`;
            circle.classList.add("ripple-effect");
            
            const ripple = button.getElementsByClassName("ripple-effect")[0];
            
            if (ripple) {
                ripple.remove();
            }
            
            button.appendChild(circle);
        }
        
        // Create particle effects
        function createParticles(event) {
            const button = event.currentTarget;
            const rect = button.getBoundingClientRect();
            const centerX = rect.left + rect.width / 2;
            const centerY = rect.top + rect.height / 2;
            
            for (let i = 0; i < 6; i++) {
                const particle = document.createElement("div");
                particle.classList.add("home-button-particle");
                particle.style.left = `${centerX}px`;
                particle.style.top = `${centerY}px`;
                
                const angle = (Math.PI * 2 * i) / 6;
                const speed = 2 + Math.random() * 2;
                const distance = 30 + Math.random() * 30;
                
                document.body.appendChild(particle);
                
                // Animate particle
                const animation = particle.animate([
                    {
                        transform: `translate(0, 0) scale(1)`,
                        opacity: 0.8
                    },
                    {
                        transform: `translate(${Math.cos(angle) * distance}px, ${Math.sin(angle) * distance}px) scale(0)`,
                        opacity: 0
                    }
                ], {
                    duration: 500 + Math.random() * 300,
                    easing: 'cubic-bezier(0.215, 0.610, 0.355, 1)'
                });
                
                animation.onfinish = () => {
                    particle.remove();
                };
            }
        }
        
        // Super home button click handler
        superHomeButton.addEventListener('click', function(event) {
            // Create ripple effect
            createRipple(event);
            
            // Create particle explosion
            createParticles(event);
            
            // Add click animation
            this.style.animation = 'none';
            this.style.transform = 'scale(0.9)';
            
            setTimeout(() => {
                this.style.animation = 'float 3s ease-in-out infinite, glow 2s ease-in-out infinite alternate';
                this.style.transform = 'scale(1)';
            }, 150);
            
            // Show confirmation modal
            showModal(
                "Return to Dashboard Home",
                "You are about to return to the main EMFORHS Dashboard. All your progress will be saved automatically.",
                HOME_PAGE_URL
            );
        });
        
        // Add hover particle effects
        superHomeButton.addEventListener('mouseenter', function() {
            createParticles({ currentTarget: this });
        });
        
        // Keyboard shortcut for home button (Ctrl+H or Cmd+H)
        document.addEventListener('keydown', function(e) {
            if ((e.ctrlKey || e.metaKey) && e.key === 'h') {
                e.preventDefault();
                superHomeButton.click();
            }
        });
        
        // ========== ACADEMIC YEAR AND TERM CALCULATION ==========
        function calculateAcademicYear() {
            const now = new Date();
            const currentYear = now.getFullYear();
            const currentMonth = now.getMonth() + 1;
            
            let academicYearStart, academicYearEnd;
            
            if (currentMonth >= 9) {
                academicYearStart = currentYear;
                academicYearEnd = currentYear + 1;
            } else {
                academicYearStart = currentYear - 1;
                academicYearEnd = currentYear;
            }
            
            return `${academicYearStart}-${academicYearEnd}`;
        }
        
        function calculateCurrentTerm() {
            const now = new Date();
            const currentMonth = now.getMonth() + 1;
            
            let term = "";
            
            if (currentMonth >= 9 && currentMonth <= 12) {
                term = "1st Term";
            } else if (currentMonth >= 1 && currentMonth <= 3) {
                term = "2nd Term";
            } else if (currentMonth >= 4 && currentMonth <= 7) {
                term = "3rd Term";
            } else {
                const currentDay = now.getDate();
                if (currentDay <= 15) {
                    term = "Holiday Break (After 3rd Term)";
                } else {
                    term = "Holiday Break (Before 1st Term)";
                }
            }
            
            return term;
        }
        
        function updateAcademicInfo() {
            const academicYear = calculateAcademicYear();
            const currentTerm = calculateCurrentTerm();
            
            const academicYearElement = document.getElementById('academicYearTerm');
            if (academicYearElement) {
                academicYearElement.innerHTML = `<i class="fas fa-calendar-alt mr-1"></i>Academic Year: ${academicYear} | Current Term: ${currentTerm}`;
            }
            
            const currentYear = new Date().getFullYear();
            const copyrightElement = document.getElementById('footerCopyright');
            if (copyrightElement) {
                copyrightElement.textContent = `© ${currentYear} EMFORHS Finance Portal. All rights reserved.`;
            }
        }
        
        // ========== DOM Elements ==========
        const tuitionBtn = document.getElementById('tuitionBtn');
        const statementBtn = document.getElementById('statementBtn');
        const successModal = document.getElementById('successModal');
        const modalTitle = document.getElementById('modalTitle');
        const modalMessage = document.getElementById('modalMessage');
        const proceedRedirect = document.getElementById('proceedRedirect');
        const cancelModal = document.getElementById('cancelModal');
        const scrollContainer = document.getElementById('scrollContainer');
        
        // ========== URL CONFIGURATION ==========
        const TUITION_URL = "{% url 'new_term_bill_payment' %}";
        const STATEMENT_URL = "{% url 'term_end_account' %}";
        
        // ========== PREVENT OVERSCROLL/BOUNCE - FIXED ==========
        // Simplified approach - let the container handle everything
        scrollContainer.addEventListener('touchstart', function(e) {
            // Allow touch events to propagate normally
        }, { passive: true });
        
        scrollContainer.addEventListener('touchmove', function(e) {
            // Allow touch move events to propagate normally
        }, { passive: true });
        
        // Prevent body scroll when modal is open
        function preventBodyScroll() {
            document.body.style.overflow = 'hidden';
        }
        
        function allowBodyScroll() {
            document.body.style.overflow = '';
        }
        
        // ========== REDIRECT FUNCTIONS ==========
        let currentRedirectUrl = '';
        
        tuitionBtn.addEventListener('click', function() {
            showModal(
                "Redirecting to EMFORHS Tuition Dashboard",
                "You are now being taken to the Emilia Foremost High School Tuition and Bill Summary page.",
                TUITION_URL
            );
        });
        
        statementBtn.addEventListener('click', function() {
            showModal(
                "Accessing EMFORHS Term-End Statements",
                "You are now being redirected to the Term-End Account Statement portal.",
                STATEMENT_URL
            );
        });
        
        // ========== MODAL FUNCTIONS ==========
        function showModal(title, message, url) {
            modalTitle.textContent = title;
            modalMessage.textContent = message;
            currentRedirectUrl = url;
            
            successModal.classList.remove('hidden');
            preventBodyScroll();
            
            setTimeout(() => {
                const modalContent = successModal.querySelector('div > div');
                modalContent.classList.remove('scale-95', 'opacity-0');
                modalContent.classList.add('scale-100', 'opacity-100');
            }, 10);
        }
        
        function hideModal() {
            const modalContent = successModal.querySelector('div > div');
            modalContent.classList.remove('scale-100', 'opacity-100');
            modalContent.classList.add('scale-95', 'opacity-0');
            
            setTimeout(() => {
                successModal.classList.add('hidden');
                allowBodyScroll();
            }, 300);
        }
        
        proceedRedirect.addEventListener('click', function() {
            hideModal();
            
            setTimeout(() => {
                if (currentRedirectUrl) {
                    window.location.href = currentRedirectUrl;
                } else {
                    console.error("No redirect URL specified!");
                }
            }, 350);
        });
        
        cancelModal.addEventListener('click', hideModal);
        
        successModal.addEventListener('click', function(e) {
            if (e.target === successModal) {
                hideModal();
            }
        });
        
        // ========== INITIALIZATION ==========
        document.addEventListener('DOMContentLoaded', function() {
            updateAcademicInfo();
            
            // Initialize home button
            setTimeout(() => {
                superHomeButton.style.opacity = '1';
                superHomeButton.style.transform = 'scale(1)';
            }, 500);
            
            // Handle image error for logo
            const logoImages = document.querySelectorAll('img[src*="EMILIA%20LOGO.png"]');
            logoImages.forEach(img => {
                img.addEventListener('error', function() {
                    this.src = 'https://via.placeholder.com/80x80/1e40af/ffffff?text=EMFORHS';
                });
            });
            
            // Ensure scroll container is properly sized
            scrollContainer.style.height = window.innerHeight + 'px';
            
            // Fix iOS Safari 100vh issue
            function setVH() {
                const vh = window.innerHeight * 0.01;
                document.documentElement.style.setProperty('--vh', `${vh}px`);
            }
            
            setVH();
            window.addEventListener('resize', setVH);
        });
        
        window.addEventListener('load', function() {
            setTimeout(() => {
                console.log("EMFORHS Finance Portal loaded successfully!");
                console.log("Press 'Ctrl+H' for Dashboard Home, '1' for Tuition Dashboard, or '2' for Term-End Statements");
                
                const schoolHeader = document.querySelector('.school-header');
                if (schoolHeader) schoolHeader.classList.add('fade-in');
                
                console.log("Home URL:", HOME_PAGE_URL);
                console.log("Tuition URL:", TUITION_URL);
                console.log("Statement URL:", STATEMENT_URL);
            }, 1000);
        });
        
        // ========== ADDITIONAL FUNCTIONALITY ==========
        document.querySelectorAll('.card-hover-effect').forEach(card => {
            card.addEventListener('mouseenter', function() {
                this.classList.add('glow-effect');
            });
            
            card.addEventListener('mouseleave', function() {
                this.classList.remove('glow-effect');
            });
        });
        
        document.addEventListener('keydown', function(e) {
            if (e.key === '1') tuitionBtn.click();
            if (e.key === '2') statementBtn.click();
            if (e.key === 'Escape') hideModal();
            if (e.key === 'Enter' && !successModal.classList.contains('hidden')) {
                proceedRedirect.click();
            }
        });
        
        // Auto-hide home button when scrolling down
        let lastScrollTop = 0;
        let isScrolling = false;
        
        scrollContainer.addEventListener('scroll', function() {
            const scrollTop = this.scrollTop;
            
            if (!isScrolling) {
                window.requestAnimationFrame(function() {
                    if (scrollTop > lastScrollTop && scrollTop > 100) {
                        // Scrolling down
                        superHomeButton.style.opacity = '0.7';
                        superHomeButton.style.transform = 'translateY(80px) scale(0.8)';
                    } else {
                        // Scrolling up
                        superHomeButton.style.opacity = '1';
                        superHomeButton.style.transform = 'translateY(0) scale(1)';
                    }
                    
                    lastScrollTop = scrollTop;
                    isScrolling = false;
                });
                
                isScrolling = true;
            }
        });
        
        // Handle orientation change on mobile
        window.addEventListener('orientationchange', function() {
            setTimeout(function() {
                scrollContainer.style.height = window.innerHeight + 'px';
                // Force a reflow to ensure proper rendering
                document.body.style.overflow = 'hidden';
                setTimeout(() => {
                    document.body.style.overflow = '';
                }, 50);
            }, 300);
        });
        
        // Double-tap to go to top
        let lastTap = 0;
        document.addEventListener('touchend', function(e) {
            const currentTime = new Date().getTime();
            const tapLength = currentTime - lastTap;
            
            if (tapLength < 500 && tapLength > 0) {
                // Double tap detected
                if (e.target.closest('.school-header')) {
                    scrollContainer.scrollTo({
                        top: 0,
                        behavior: 'smooth'
                    });
                }
            }
            
            lastTap = currentTime;
        });
        
        // Handle window resize for responsiveness
        let resizeTimeout;
        window.addEventListener('resize', function() {
            clearTimeout(resizeTimeout);
            resizeTimeout = setTimeout(function() {
                scrollContainer.style.height = window.innerHeight + 'px';
            }, 250);
        });
    </script>
</body>
</html>